<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zfsoft.ha.dbaccess.dao.DbHaAppointmentMapper">
  <resultMap id="BaseResultMap" type="com.zfsoft.ha.dbaccess.data.DbHaAppointment">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" jdbcType="BIGINT" property="id" />
    <result column="SCHEDULE_ID" jdbcType="BIGINT" property="scheduleId" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="CARD_NO" jdbcType="VARCHAR" property="cardNo" />
    <result column="PHONE" jdbcType="VARCHAR" property="phone" />
    <result column="COMPANY_NAME" jdbcType="VARCHAR" property="companyName" />
    <result column="COMPANY_CODE" jdbcType="VARCHAR" property="companyCode" />
    <result column="APPOINTMENT_WORK_USER_ID" jdbcType="INTEGER" property="appointmentWorkUserId" />
    <result column="APPOINTMENT_TIME" jdbcType="VARCHAR" property="appointmentTime" />
    <result column="APPOINTMENT_TIME_PERIOD" jdbcType="VARCHAR" property="appointmentTimePeriod" />
    <result column="AM_OR_PM" jdbcType="TIMESTAMP" property="amOrPm" />
    <result column="APPOINTMENT_STATUS" jdbcType="VARCHAR" property="appointmentStatus" />
    <result column="MEMO" jdbcType="VARCHAR" property="memo" />
    <result column="CREATE_BY" jdbcType="VARCHAR" property="createBy" />
    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
    <result column="UPDATE_BY" jdbcType="VARCHAR" property="updateBy" />
    <result column="UPDATE_DATE" jdbcType="TIMESTAMP" property="updateDate" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ID, NAME, CARD_NO, PHONE, COMPANY_NAME, COMPANY_CODE, APPOINTMENT_WORK_USER_ID, APPOINTMENT_TIME, APPOINTMENT_TIME_PERIOD,AM_OR_PM,
    APPOINTMENT_STATUS, MEMO, CREATE_BY, CREATE_DATE, UPDATE_BY, UPDATE_DATE
  </sql>
  <select id="selectByExample" parameterType="com.zfsoft.ha.dbaccess.data.example.DbHaAppointmentExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from t_ha_appointment
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_ha_appointment
    where ID = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from t_ha_appointment
    where ID = #{id,jdbcType=BIGINT}
  </delete>
  <delete id="deleteByExample" parameterType="com.zfsoft.ha.dbaccess.data.example.DbHaAppointmentExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from t_ha_appointment
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.zfsoft.ha.dbaccess.data.DbHaAppointment">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_ha_appointment (SCHEDULE_ID,NAME, CARD_NO,
      PHONE, COMPANY_NAME, COMPANY_CODE, 
      APPOINTMENT_WORK_USER_ID, APPOINTMENT_TIME,APPOINTMENT_TIME_PERIOD, AM_OR_PM,
      APPOINTMENT_STATUS, MEMO, CREATE_BY, 
      CREATE_DATE, UPDATE_BY, UPDATE_DATE
      )
    values (#{scheduleId,jdbcType=INTEGER},#{name,jdbcType=VARCHAR}, #{cardNo,jdbcType=VARCHAR},
      #{phone,jdbcType=VARCHAR}, #{companyName,jdbcType=VARCHAR}, #{companyCode,jdbcType=VARCHAR}, 
      #{appointmentWorkUserId,jdbcType=INTEGER}, #{appointmentTime,jdbcType=VARCHAR},#{appointmentTimePeriod,jdbcType=VARCHAR}, #{amOrPm},
    #{appointmentStatus,jdbcType=VARCHAR}, #{memo,jdbcType=VARCHAR}, #{createBy,jdbcType=VARCHAR},
      #{createDate,jdbcType=TIMESTAMP}, #{updateBy,jdbcType=VARCHAR}, #{updateDate,jdbcType=TIMESTAMP}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.zfsoft.ha.dbaccess.data.DbHaAppointment">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_ha_appointment
    <trim prefix="(" suffix=")" suffixOverrides=",">
<!--      <if test="id != null">-->
<!--        ID,-->
<!--      </if>-->
      <if test="scheduleId != null">
        SCHEDULE_ID,
      </if>
      <if test="name != null">
        NAME,
      </if>
      <if test="cardNo != null">
        CARD_NO,
      </if>
      <if test="phone != null">
        PHONE,
      </if>
      <if test="companyName != null">
        COMPANY_NAME,
      </if>
      <if test="companyCode != null">
        COMPANY_CODE,
      </if>
      <if test="appointmentWorkUserId != null">
        APPOINTMENT_WORK_USER_ID,
      </if>
      <if test="appointmentTime != null">
        APPOINTMENT_TIME,
      </if>
      <if test="appointmentTimePeriod != null">
        APPOINTMENT_TIME_PERIOD,
      </if>
      <if test="amOrPm != null">
        AM_OR_PM,
      </if>
      <if test="appointmentStatus != null">
        APPOINTMENT_STATUS,
      </if>
      <if test="memo != null">
        MEMO,
      </if>
      <if test="createBy != null">
        CREATE_BY,
      </if>
      <if test="createDate != null">
        CREATE_DATE,
      </if>
      <if test="updateBy != null">
        UPDATE_BY,
      </if>
      <if test="updateDate != null">
        UPDATE_DATE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
<!--      <if test="id != null">-->
<!--        #{id,jdbcType=BIGINT},-->
<!--      </if>-->
      <if test="scheduleId != null">
        #{scheduleId,jdbcType=INTEGER}
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="cardNo != null">
        #{cardNo,jdbcType=VARCHAR},
      </if>
      <if test="phone != null">
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="companyName != null">
        #{companyName,jdbcType=VARCHAR},
      </if>
      <if test="companyCode != null">
        #{companyCode,jdbcType=VARCHAR},
      </if>
      <if test="appointmentWorkUserId != null">
        #{appointmentWorkUserId,jdbcType=INTEGER},
      </if>
      <if test="appointmentTime != null">
        #{appointmentTime,jdbcType=VARCHAR},
      </if>
      <if test="appointmentTimePeriod != null">
        #{appointmentTimePeriod,jdbcType=VARCHAR},
      </if>
      <if test="amOrPm != null">
        #{amOrPm,jdbcType=VARCHAR},
      </if>
      <if test="appointmentStatus != null">
        #{appointmentStatus,jdbcType=VARCHAR},
      </if>
      <if test="memo != null">
        #{memo,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null">
        #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null">
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null">
        #{updateBy,jdbcType=VARCHAR},
      </if>
      <if test="updateDate != null">
        #{updateDate,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.zfsoft.ha.dbaccess.data.example.DbHaAppointmentExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from t_ha_appointment
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_ha_appointment
    <set>
      <if test="record.id != null">
        ID = #{record.id,jdbcType=BIGINT},
      </if>
      <if test="record.scheduleId != null">
        SCHEDULE_ID = #{record.scheduleId,jdbcType=INTEGER},
      </if>
      <if test="record.name != null">
        NAME = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.cardNo != null">
        CARD_NO = #{record.cardNo,jdbcType=VARCHAR},
      </if>
      <if test="record.phone != null">
        PHONE = #{record.phone,jdbcType=VARCHAR},
      </if>
      <if test="record.companyName != null">
        COMPANY_NAME = #{record.companyName,jdbcType=VARCHAR},
      </if>
      <if test="record.companyCode != null">
        COMPANY_CODE = #{record.companyCode,jdbcType=VARCHAR},
      </if>
      <if test="record.appointmentWorkUserId != null">
        APPOINTMENT_WORK_USER_ID = #{record.appointmentWorkUserId,jdbcType=INTEGER},
      </if>
      <if test="record.appointmentTime != null">
        APPOINTMENT_TIME = #{record.appointmentTime,jdbcType=VARCHAR},
      </if>
      <if test="record.appointmentTimePeriod != null">
        APPOINTMENT_TIME_PERIOD = #{record.appointmentTimePeriod,jdbcType=VARCHAR},
      </if>
      <if test="record.amOrPm != null">
        AM_OR_PM = #{record.amOrPm,jdbcType=VARCHAR},
      </if>
      <if test="record.appointmentStatus != null">
        APPOINTMENT_STATUS = #{record.appointmentStatus,jdbcType=VARCHAR},
      </if>
      <if test="record.memo != null">
        MEMO = #{record.memo,jdbcType=VARCHAR},
      </if>
      <if test="record.createBy != null">
        CREATE_BY = #{record.createBy,jdbcType=VARCHAR},
      </if>
      <if test="record.createDate != null">
        CREATE_DATE = #{record.createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updateBy != null">
        UPDATE_BY = #{record.updateBy,jdbcType=VARCHAR},
      </if>
      <if test="record.updateDate != null">
        UPDATE_DATE = #{record.updateDate,jdbcType=TIMESTAMP},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_ha_appointment
    set ID = #{record.id,jdbcType=BIGINT},
      SCHEDULE_ID = #{record.scheduleId,jdbcType=INTEGER},,
      NAME = #{record.name,jdbcType=VARCHAR},
      CARD_NO = #{record.cardNo,jdbcType=VARCHAR},
      PHONE = #{record.phone,jdbcType=VARCHAR},
      COMPANY_NAME = #{record.companyName,jdbcType=VARCHAR},
      COMPANY_CODE = #{record.companyCode,jdbcType=VARCHAR},
      APPOINTMENT_WORK_USER_ID = #{record.appointmentWorkUserId,jdbcType=INTEGER},
      APPOINTMENT_TIME = #{record.appointmentTime,jdbcType=VARCHAR},
      APPOINTMENT_TIME_PERIOD = #{record.appointmentTimePeriod,jdbcType=VARCHAR},
      AM_OR_PM = #{record.amOrPm,jdbcType=VARCHAR},
      APPOINTMENT_STATUS = #{record.appointmentStatus,jdbcType=VARCHAR},
      MEMO = #{record.memo,jdbcType=VARCHAR},
      CREATE_BY = #{record.createBy,jdbcType=VARCHAR},
      CREATE_DATE = #{record.createDate,jdbcType=TIMESTAMP},
      UPDATE_BY = #{record.updateBy,jdbcType=VARCHAR},
      UPDATE_DATE = #{record.updateDate,jdbcType=TIMESTAMP}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.zfsoft.ha.dbaccess.data.DbHaAppointment">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_ha_appointment
    <set>
      <if test="scheduleId != null">
        SCHEDULE_ID = #{scheduleId,jdbcType=INTEGER},,
      </if>
      <if test="name != null">
        NAME = #{name,jdbcType=VARCHAR},
      </if>
      <if test="cardNo != null">
        CARD_NO = #{cardNo,jdbcType=VARCHAR},
      </if>
      <if test="phone != null">
        PHONE = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="companyName != null">
        COMPANY_NAME = #{companyName,jdbcType=VARCHAR},
      </if>
      <if test="companyCode != null">
        COMPANY_CODE = #{companyCode,jdbcType=VARCHAR},
      </if>
      <if test="appointmentWorkUserId != null">
        APPOINTMENT_WORK_USER_ID = #{appointmentWorkUserId,jdbcType=INTEGER},
      </if>
      <if test="appointmentTime != null">
        APPOINTMENT_TIME = #{appointmentTime,jdbcType=VARCHAR},
      </if>
      <if test="appointmentTimePeriod != null">
        APPOINTMENT_TIME_PERIOD = #{appointmentTimePeriod,jdbcType=VARCHAR},
      </if>
      <if test="amOrPm != null">
        AM_OR_PM = #{amOrPm,jdbcType=VARCHAR},
      </if>
      <if test="appointmentStatus != null">
        APPOINTMENT_STATUS = #{appointmentStatus,jdbcType=VARCHAR},
      </if>
      <if test="memo != null">
        MEMO = #{memo,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null">
        CREATE_BY = #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null">
        CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null">
        UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
      </if>
      <if test="updateDate != null">
        UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
      </if>
    </set>
    where ID = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zfsoft.ha.dbaccess.data.DbHaAppointment">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_ha_appointment
    set SCHEDULE_ID = #{scheduleId,jdbcType=INTEGER},
      NAME = #{name,jdbcType=VARCHAR},
      CARD_NO = #{cardNo,jdbcType=VARCHAR},
      PHONE = #{phone,jdbcType=VARCHAR},
      COMPANY_NAME = #{companyName,jdbcType=VARCHAR},
      COMPANY_CODE = #{companyCode,jdbcType=VARCHAR},
      APPOINTMENT_WORK_USER_ID = #{appointmentWorkUserId,jdbcType=INTEGER},
      APPOINTMENT_TIME = #{appointmentTime,jdbcType=VARCHAR},
      APPOINTMENT_TIME_PERIOD = #{appointmentTimePeriodjdbcType=VARCHAR},
      AM_OR_PM = #{amOrPm,jdbcType=VARCHAR},
      APPOINTMENT_STATUS = #{appointmentStatus,jdbcType=VARCHAR},
      MEMO = #{memo,jdbcType=VARCHAR},
      CREATE_BY = #{createBy,jdbcType=VARCHAR},
      CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
      UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP}
    where ID = #{id,jdbcType=BIGINT}
  </update>

  <!--通过主键修改数据-->
  <update id="update" parameterType="com.zfsoft.ha.dbaccess.data.DbHaAppointment">
    update t_ha_appointment
    <set>
      <if test="scheduleId != null">
        SCHEDULE_ID = #{scheduleId,jdbcType=INTEGER},,
      </if>
      <if test="name != null">
        NAME = #{name},
      </if>
      <if test="cardNo != null">
        CARD_NO = #{cardNo},
      </if>
      <if test="phone != null">
        PHONE = #{phone},
      </if>
      <if test="companyName != null">
        COMPANY_NAME = #{companyName},
      </if>
      <if test="companyCode != null">
        COMPANY_CODE = #{companyCode},
      </if>
      <if test="appointmentWorkUserId != null">
        APPOINTMENT_WORK_USER_ID = #{appointmentWorkUserId},
      </if>
      <if test="appointmentTime != null">
        APPOINTMENT_TIME = #{appointmentTime},
      </if>
      <if test="appointmentTimePeriod != null">
        APPOINTMENT_TIME_PERIOD = #{appointmentTimePeriod},
      </if>
      <if test="amOrPm != null">
        AM_OR_PM = #{amOrPm},
      </if>
      <if test="appointmentStatus != null">
        APPOINTMENT_STATUS = #{appointmentStatus},
      </if>
      <if test="memo != null">
        MEMO = #{memo},
      </if>
      <if test="createBy != null">
        CREATE_BY = #{createBy},
      </if>
      <if test="createDate != null">
        CREATE_DATE = #{createDate},
      </if>
      <if test="updateBy != null">
        UPDATE_BY = #{updateBy},
      </if>
      <if test="updateDate != null">
        UPDATE_DATE = #{updateDate},
      </if>
    </set>
    where ID = #{id}
  </update>

  <resultMap id="dHaAppointmentVo" type="com.zfsoft.ha.dbaccess.data.vo.DbHaAppointmentVo">
    <id column="ID" jdbcType="BIGINT" property="id" />
    <result column="SCHEDULE_ID" jdbcType="BIGINT" property="scheduleId" />
    <result column="NAME" property="name"/>
    <result column="WORK_USER_NAME" property="workUserName"/>
    <result column="APPOINTMENT_WORK_USER_ID" property="appointmentWorkUserId"/>

    <result column="CARD_NO" property="cardNo"/>
    <result column="COMPANY_NAME" property="companyName"/>
    <result column="COMPANY_CODE" property="companyCode"/>
    <result column="APPOINTMENT_TIME" property="appointmentTime"/>
    <result column="APPOINTMENT_TIME_PERIOD" property="appointmentTimePeriod"/>
    <result column="AM_OR_PM" property="amOrPm"/>
    <result column="APPOINTMENT_STATUS" property="appointmentStatus"/>
    <result column="STATUS" property="status"/>

    <result column="PHONE" jdbcType="VARCHAR" property="phone" />
    <result column="GROUP_ID" property="groupId"/>
    <result column="GROUP_NAME" property="groupName"/>
  </resultMap>

  <select id="queryAppointmentList" resultMap="dHaAppointmentVo">
    SELECT
      a.ID,
      a.SCHEDULE_ID,
      a.NAME,
      b.NAME AS WORK_USER_NAME,
      a.APPOINTMENT_WORK_USER_ID,
      a.CARD_NO,
      a.COMPANY_NAME,
      a.COMPANY_CODE,
      a.APPOINTMENT_TIME,
      a.APPOINTMENT_TIME_PERIOD,
      a.AM_OR_PM,
      a.APPOINTMENT_STATUS ,
      CASE WHEN a.APPOINTMENT_STATUS = '2' THEN '已处理'
           WHEN a.APPOINTMENT_STATUS = '1' THEN '已处理'
           WHEN a.APPOINTMENT_STATUS = '3' THEN '已删除' END AS STATUS
    FROM
      t_ha_appointment a,
      t_ha_help_work_user b
    WHERE
      a.APPOINTMENT_WORK_USER_ID = b.id
      <if test="name !=null and name !=''">
        and a.NAME = #{name}
      </if>
      <if test="cardNo !=null and name !=''">
        and a.CARD_NO = #{cardNo}
      </if>
      <if test="appointmentWorkUserId !=null and appointmentWorkUserId !=''">
        and a.APPOINTMENT_WORK_USER_ID = #{appointmentWorkUserId}
      </if>
      <if test="appointmentStatus !=null and appointmentStatus !=''">
        and a.APPOINTMENT_STATUS = #{appointmentStatus}
      </if>
      <if test="scheduleId !=null and scheduleId !=''">
        and a.SCHEDULE_ID = #{scheduleId}
      </if>
      <if test="appointmentTimePeriod !=null and appointmentTimePeriod !=''">
        and a.APPOINTMENT_TIME_PERIOD = #{appointmentTimePeriod}
      </if>
    ORDER BY
      a.APPOINTMENT_TIME DESC
  </select>

  <select id="queryAppointmentByCardNo" resultMap="dHaAppointmentVo">
    SELECT
    a.ID,
    a.SCHEDULE_ID,
    a.NAME,
    b.NAME AS WORK_USER_NAME,
    b.GROUP_ID,
    c.NAME as GROUP_NAME,
    a.APPOINTMENT_WORK_USER_ID,
    a.CARD_NO,
    a.PHONE,
    a.COMPANY_NAME,
    a.COMPANY_CODE,
    a.APPOINTMENT_TIME,
    a.APPOINTMENT_TIME_PERIOD,
    a.AM_OR_PM,
    a.APPOINTMENT_STATUS ,
    CASE WHEN a.APPOINTMENT_STATUS = '2' THEN '已处理'
    WHEN a.APPOINTMENT_STATUS = '1' THEN '已处理'
    WHEN a.APPOINTMENT_STATUS = '3' THEN '已删除' END AS STATUS
    FROM
    t_ha_appointment a
    left join t_ha_help_work_user b
        on a.APPOINTMENT_WORK_USER_ID = b.id
    left join  t_ha_work_user_group c
        on b.GROUP_ID = c.ID
    <where>
      <if test="cardNo !=null and cardNo !=''">
        and a.CARD_NO = #{cardNo}
      </if>
      <if test="appointmentStatus !=null and appointmentStatus !=''">
        and a.APPOINTMENT_STATUS = #{appointmentStatus}
      </if>
      <if test="startTime != null and startTime != ''"><!-- 开始时间检索 -->
        AND a.APPOINTMENT_TIME &gt;= #{startTime}
      </if>
      <if test="endTime != null and endTime != ''"><!-- 开始时间检索 -->
        AND a.APPOINTMENT_TIME &lt;= #{endTime}
      </if>

    </where>
    ORDER BY
    a.APPOINTMENT_TIME DESC
  </select>

</mapper>