<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zfsoft.ha.dbaccess.dao.DbHaWorkServiceMapper">
    <resultMap id="BaseResultMap" type="com.zfsoft.ha.dbaccess.data.DbHaWorkService">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="ID" jdbcType="BIGINT" property="id"/>
        <result column="WORK_QUEUE_ID" jdbcType="BIGINT" property="workQueueId"/>
        <!--新加字段 WORK_USER_ID update by kangax -->
        <result column="WORK_USER_ID" jdbcType="BIGINT" property="workUserId"/>
        <result column="SERVICE_TYPE" jdbcType="VARCHAR" property="serviceType"/>
        <result column="SERVICE_MEMO" jdbcType="VARCHAR" property="serviceMemo"/>
        <result column="SX_SERVICE_ID" jdbcType="VARCHAR" property="sxServiceId"/>
        <result column="QL_CASE_ID" jdbcType="VARCHAR" property="qlCaseId"/>
        <result column="PUSH_MEMO" jdbcType="VARCHAR" property="pushMemo"/>
        <result column="CREATE_BY" jdbcType="VARCHAR" property="createBy"/>
        <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate"/>
        <result column="UPDATE_BY" jdbcType="VARCHAR" property="updateBy"/>
        <result column="UPDATE_DATE" jdbcType="TIMESTAMP" property="updateDate"/>
        <result column="TURN_RECORD_ID" jdbcType="VARCHAR" property="turnRecordId"/>
        <result column="SERVICE_STATUS" jdbcType="TIMESTAMP" property="serviceStatus"/>
        <result column="CASE_NUMBER" jdbcType="VARCHAR" property="caseNumber"/>
        <result column="OPERATOR_NAME" jdbcType="VARCHAR" property="operatorName"/>
        <result column="OPERATOR_CARD_NO" jdbcType="VARCHAR" property="operatorCardNo"/>
        <result column="OPERATOR_PHONE" jdbcType="VARCHAR" property="operatorPhone"/>
        <result column="PUSH_DATE" jdbcType="TIMESTAMP" property="pushDate"/>
    </resultMap>

    <resultMap id="BaseResultMap2" type="com.zfsoft.ha.dbaccess.data.vo.DbHaWorkServiceVo">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="ID" jdbcType="BIGINT" property="id"/>
        <result column="WORK_QUEUE_ID" jdbcType="BIGINT" property="workQueueId"/>
        <!--新加字段 WORK_USER_ID update by kangax -->
        <result column="WORK_USER_ID" jdbcType="BIGINT" property="workUserId"/>
        <result column="SERVICE_TYPE" jdbcType="VARCHAR" property="serviceType"/>
        <result column="PUSH_TYPE" jdbcType="VARCHAR" property="pushType"/>
        <result column="SERVICE_MEMO" jdbcType="VARCHAR" property="serviceMemo"/>
        <result column="SX_SERVICE_ID" jdbcType="VARCHAR" property="sxServiceId"/>
        <result column="QL_CASE_ID" jdbcType="VARCHAR" property="qlCaseId"/>
        <result column="PUSH_MEMO" jdbcType="VARCHAR" property="pushMemo"/>
        <result column="CREATE_BY" jdbcType="VARCHAR" property="createBy"/>
        <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate"/>
        <result column="UPDATE_BY" jdbcType="VARCHAR" property="updateBy"/>
        <result column="UPDATE_DATE" jdbcType="TIMESTAMP" property="updateDate"/>
        <result column="SERVICE_NAME" jdbcType="VARCHAR" property="serviceName"/>
        <result column="SERVICE_TIME" jdbcType="TIMESTAMP" property="serviceTime"/>
        <result column="COMPANY_NAME" jdbcType="VARCHAR" property="companyName"/>
        <result column="COMPANY_CODE" jdbcType="VARCHAR" property="companyCode"/>
        <result column="NAME" jdbcType="VARCHAR" property="name"/>
        <result column="TURN_RECORD_ID" jdbcType="VARCHAR" property="turnRecordId"/>
        <result column="SERVICE_STATUS" jdbcType="TIMESTAMP" property="serviceStatus"/>
        <result column="WORK_USER_NAME" jdbcType="VARCHAR" property="workUserName"/>
        <result column="CASE_NUMBER" jdbcType="VARCHAR" property="caseNumber"/>

        <result column="APPLY_USER_NAME" jdbcType="VARCHAR" property="applyUserName"/>
        <result column="APPLY_USER_TYPE" jdbcType="VARCHAR" property="applyUserType"/>
        <result column="PHONE" jdbcType="VARCHAR" property="phone"/>

    </resultMap>
    <sql id="Example_Where_Clause">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Example_Where_Clause">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="example.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        ID, WORK_QUEUE_ID, TURN_RECORD_ID, WORK_USER_ID, SERVICE_TYPE,
        PUSH_TYPE, SERVICE_MEMO, SX_SERVICE_ID, QL_CASE_ID, CASE_NUMBER,
        SERVICE_STATUS, PUSH_MEMO, CREATE_BY, CREATE_DATE, UPDATE_BY, UPDATE_DATE,
        OPERATOR_NAME,OPERATOR_CARD_NO,OPERATOR_PHONE,PUSH_DATE

    </sql>
    <select id="selectByExample" parameterType="com.zfsoft.ha.dbaccess.data.example.DbHaWorkServiceExample"
            resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <if test="distinct">
            distinct
        </if>
        <include refid="Base_Column_List"/>
        from t_ha_work_service
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
    <select id="selectByWorkQueueIds"    resultMap="BaseResultMap2">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
            a.*,
            b.FIRST_SERVICE_BEGIN_TIME as SERVICE_TIME ,
            b.COMPANY_NAME as COMPANY_NAME,
            b.COMPANY_CODE as COMPANY_CODE,
            d.NAME as WORK_USER_NAME,
            c.SERVICE_NAME,
            c.CASE_NUMBER
        from t_ha_work_service a
        left join  t_ha_work_queue b
            on  a.WORK_QUEUE_ID = b.ID
        left join  t_ql_case c
            on  a.QL_CASE_ID = c.CASE_OID
        left join  (select ID,NAME  from t_ha_help_work_user)  d
            on  a.WORK_USER_ID = d.ID
        <where>
            <if test="workQueueIds != null">
                and a.WORK_QUEUE_ID in
                <foreach item="workQueueId" index="index" collection="workQueueIds" open="(" close=")" separator=",">
                    #{workQueueId}
                </foreach>
            </if>
        </where>
        order by a.CREATE_DATE desc
    </select>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from t_ha_work_service
        where ID = #{id,jdbcType=BIGINT}
    </select>

    <select id="selectByCaseOid" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from t_ha_work_service
        where QL_CASE_ID = #{caseOid}
        order by CREATE_DATE
        limit 1
    </select>
    <select id="getTempServiceNum" parameterType="java.lang.Long" resultType="java.lang.Integer">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
            count(*)
        from t_ha_work_service a
        left join
            (select ID,CASE_OID,CASE_STATUS from t_ql_case ) b
        on a.QL_CASE_ID = b.CASE_OID
        where a.WORK_USER_ID = #{userId}
        and b.CASE_STATUS ='0'
    </select>
    <select id="getTempServiceList" resultMap="BaseResultMap2">

        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
            a.*,
            c.FIRST_SERVICE_BEGIN_TIME as SERVICE_TIME ,
            c.COMPANY_NAME as COMPANY_NAME,
            c.COMPANY_CODE as COMPANY_CODE,
            c.NAME,
            c.PHONE,
            d.NAME as WORK_USER_NAME,
            b.SERVICE_NAME,
            b.CASE_NUMBER,
            ba.APPLY_USER_NAME
        from t_ha_work_service a
        join
            t_ql_case b
            on a.QL_CASE_ID = b.CASE_OID
        left join
            t_ql_case_applay ba
        on b.CASE_OID = ba.CASE_OID
        left join  t_ha_work_queue c
            on  a.WORK_QUEUE_ID = c.ID
        left join  (select ID,NAME  from t_ha_help_work_user)  d
        on  a.WORK_USER_ID = d.ID

        where
              b.CASE_STATUS ='0'
        <if test="beginADay != null"><!-- 开始时间检索 -->
            AND a.CREATE_DATE &gt;= #{beginADay}
        </if>
        <if test="endADay != null "><!-- 结束时间检索 -->
            AND a.CREATE_DATE &lt;= #{endADay}
        </if>-- 根据当天时间进行筛选
        <if test="serviceWorkUserId != null"><!-- 开始时间检索 -->
            AND a.WORK_USER_ID = #{serviceWorkUserId}
        </if>
        <if test="name != null and name != ''">
            and c.NAME like concat('%', #{name}, '%')
        </if>
        <if test="cardNo != null and cardNo != ''">
            and c.CARD_NO =#{cardNo}
        </if>
        <if test="phone != null and cardNo != ''">
            and c.PHONE =#{phone}
        </if>
        <if test="companyName != null and companyName != ''">
            and c.COMPANY_NAME like concat('%', #{companyName}, '%')
        </if>
        <if test="companyCode != null and companyCode != ''">
            and c.COMPANY_CODE=#{companyCode}
        </if>
        <if test="queueStatus != null and queueStatus != ''">
            and c.QUEUE_STATUS = #{queueStatus}
        </if>
        <if test="serviceStatus != null and serviceStatus != ''">
            and c.SERVICE_STATUS = #{serviceStatus}
        </if>
        order by a.UPDATE_DATE desc
    </select>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from t_ha_work_service
        where ID = #{id,jdbcType=BIGINT}
    </delete>
    <delete id="deleteByExample" parameterType="com.zfsoft.ha.dbaccess.data.example.DbHaWorkServiceExample">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from t_ha_work_service
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="com.zfsoft.ha.dbaccess.data.DbHaWorkService">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into t_ha_work_service ( WORK_QUEUE_ID, WORK_USER_ID,SERVICE_TYPE,
        SERVICE_MEMO, SX_SERVICE_ID, QL_CASE_ID, CASE_NUMBER,
        PUSH_MEMO,PUSH_TYPE, CREATE_BY, CREATE_DATE,
        UPDATE_BY, UPDATE_DATE,OPERATOR_NAME,OPERATOR_CARD_NO,OPERATOR_PHONE,PUSH_DATE)
        values ( #{workQueueId,jdbcType=BIGINT},#{workUserId,jdbcType=BIGINT}, #{serviceType,jdbcType=VARCHAR},
        #{serviceMemo,jdbcType=VARCHAR}, #{sxServiceId,jdbcType=VARCHAR}, #{qlCaseId,jdbcType=BIGINT}, #{caseNumber,jdbcType=VARCHAR},
        #{pushMemo,jdbcType=VARCHAR},#{pushType,jdbcType=VARCHAR}, #{createBy,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP},
        #{updateBy,jdbcType=VARCHAR}, #{updateDate,jdbcType=TIMESTAMP},
        #{operatorName,jdbcType=VARCHAR},#{operatorCardNo,jdbcType=VARCHAR},#{operatorPhone,jdbcType=VARCHAR},#{pushDate,jdbcType=TIMESTAMP})
    </insert>
    <insert id="insertSelective" parameterType="com.zfsoft.ha.dbaccess.data.DbHaWorkService" useGeneratedKeys="true" keyProperty="id">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into t_ha_work_service
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="workQueueId != null">
                WORK_QUEUE_ID,
            </if>
            <if test="turnRecordId != null">
                TURN_RECORD_ID,
            </if>
            <if test="workUserId != null">
                WORK_USER_ID,
            </if>
            <if test="serviceType != null">
                SERVICE_TYPE,
            </if>
            <if test="pushType != null">
                PUSH_Type,
            </if>
            <if test="serviceStatus != null">
                SERVICE_STATUS,
            </if>
            <if test="serviceMemo != null">
                SERVICE_MEMO,
            </if>
            <if test="sxServiceId != null">
                SX_SERVICE_ID,
            </if>
            <if test="qlCaseId != null">
                QL_CASE_ID,
            </if>
            <if test="caseNumber != null">
                CASE_NUMBER,
            </if>
            <if test="pushMemo != null">
                PUSH_MEMO,
            </if>
            <if test="createBy != null">
                CREATE_BY,
            </if>
            <if test="createDate != null">
                CREATE_DATE,
            </if>
            <if test="updateBy != null">
                UPDATE_BY,
            </if>
            <if test="updateDate != null">
                UPDATE_DATE,
            </if>
            <if test="operatorName != null">
                OPERATOR_NAME,
            </if>
            <if test="operatorCardNo != null">
                OPERATOR_CARD_NO,
            </if>
            <if test="operatorPhone != null">
                OPERATOR_PHONE,
            </if>
            <if test="pushDate != null">
                PUSH_DATE,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="workQueueId != null">
                #{workQueueId,jdbcType=BIGINT},
            </if>
            <if test="turnRecordId != null">
                #{turnRecordId,jdbcType=BIGINT},
            </if>
            <if test="workUserId != null">
                #{workUserId,jdbcType=BIGINT},
            </if>
            <if test="serviceType != null">
                #{serviceType,jdbcType=VARCHAR},
            </if>
            <if test="pushType != null">
                #{pushType,jdbcType=VARCHAR},
            </if>
            <if test="serviceStatus != null">
                #{serviceStatus,jdbcType=VARCHAR},
            </if>
            <if test="serviceMemo != null">
                #{serviceMemo,jdbcType=VARCHAR},
            </if>
            <if test="sxServiceId != null">
                #{sxServiceId,jdbcType=VARCHAR},
            </if>
            <if test="qlCaseId != null">
                #{qlCaseId,jdbcType=VARCHAR},
            </if>
            <if test="caseNumber != null">
                #{caseNumber,jdbcType=VARCHAR},
            </if>
            <if test="pushMemo != null">
                #{pushMemo,jdbcType=VARCHAR},
            </if>
            <if test="createBy != null">
                #{createBy,jdbcType=VARCHAR},
            </if>
            <if test="createDate != null">
                #{createDate,jdbcType=TIMESTAMP},
            </if>
            <if test="updateBy != null">
                #{updateBy,jdbcType=VARCHAR},
            </if>
            <if test="updateDate != null">
                #{updateDate,jdbcType=TIMESTAMP},
            </if>
            <if test="operatorName != null">
                #{operatorName,jdbcType=VARCHAR},
            </if>
            <if test="operatorCardNo != null">
                #{operatorCardNo,jdbcType=VARCHAR},
            </if>
            <if test="operatorPhone != null">
                #{operatorPhone,jdbcType=VARCHAR},
            </if>
            <if test="pushDate != null">
                #{pushDate,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <select id="countByExample" parameterType="com.zfsoft.ha.dbaccess.data.example.DbHaWorkServiceExample"
            resultType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select count(*) from t_ha_work_service
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </select>
    <update id="updateByExampleSelective" parameterType="map">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_ha_work_service
        <set>
            <if test="record.id != null">
                ID = #{record.id,jdbcType=BIGINT},
            </if>
            <if test="record.workQueueId != null">
                WORK_QUEUE_ID = #{record.workQueueId,jdbcType=BIGINT},
            </if>
            <if test="record.serviceType != null">
                SERVICE_TYPE = #{record.serviceType,jdbcType=VARCHAR},
            </if>
            <if test="record.serviceStatus != null">
                SERVICE_STATUS = #{record.serviceStatus,jdbcType=VARCHAR},
            </if>
            <if test="record.serviceMemo != null">
                SERVICE_MEMO = #{record.serviceMemo,jdbcType=VARCHAR},
            </if>
            <if test="record.sxServiceId != null">
                SX_SERVICE_ID = #{record.sxServiceId,jdbcType=VARCHAR},
            </if>
            <if test="record.qlCaseId != null">
                QL_CASE_ID = #{record.qlCaseId,jdbcType=VARCHAR},
            </if>
            <if test="record.caseNumber != null">
                CASE_NUMBER = #{record.caseNumber,jdbcType=VARCHAR},
            </if>
            <if test="record.pushMemo != null">
                PUSH_MEMO = #{record.pushMemo,jdbcType=VARCHAR},
            </if>
            <if test="record.createBy != null">
                CREATE_BY = #{record.createBy,jdbcType=VARCHAR},
            </if>
            <if test="record.createDate != null">
                CREATE_DATE = #{record.createDate,jdbcType=TIMESTAMP},
            </if>
            <if test="record.updateBy != null">
                UPDATE_BY = #{record.updateBy,jdbcType=VARCHAR},
            </if>
            <if test="record.updateDate != null">
                UPDATE_DATE = #{record.updateDate,jdbcType=TIMESTAMP},
            </if>
            <if test="record.operatorName != null">
                OPERATOR_NAME = #{record.operatorName,jdbcType=VARCHAR},
            </if>
            <if test="record.operatorCardNo != null">
                OPERATOR_CARD_NO = #{record.operatorCardNo,jdbcType=VARCHAR},
            </if>
            <if test="record.createBy != null">
                OPERATOR_PHONE = #{record.operatorPhone,jdbcType=VARCHAR},
            </if>
            <if test="record.pushDate != null">
                PUSH_DATE = #{record.pushDate,jdbcType=TIMESTAMP},
            </if>
            <if test="record.pushType != null">
                PUSH_TYPE =  #{pushType,jdbcType=VARCHAR},
            </if>
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByExample" parameterType="map">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_ha_work_service
        set ID = #{record.id,jdbcType=BIGINT},
        WORK_QUEUE_ID = #{record.workQueueId,jdbcType=BIGINT},
        SERVICE_TYPE = #{record.serviceType,jdbcType=VARCHAR},
        SERVICE_MEMO = #{record.serviceMemo,jdbcType=VARCHAR},
        SX_SERVICE_ID = #{record.sxServiceId,jdbcType=VARCHAR},
        QL_CASE_ID = #{record.qlCaseId,jdbcType=VARCHAR},
        CASE_NUMBER = #{record.caseNumber,jdbcType=VARCHAR},
        PUSH_MEMO = #{record.pushMemo,jdbcType=VARCHAR},
        CREATE_BY = #{record.createBy,jdbcType=VARCHAR},
        CREATE_DATE = #{record.createDate,jdbcType=TIMESTAMP},
        UPDATE_BY = #{record.updateBy,jdbcType=VARCHAR},
        UPDATE_DATE = #{record.updateDate,jdbcType=TIMESTAMP},
        OPERATOR_NAME = #{record.operatorName,jdbcType=VARCHAR},
        OPERATOR_CARD_NO = #{record.operatorCardNo,jdbcType=VARCHAR},
        OPERATOR_PHONE = #{record.operatorPhone,jdbcType=VARCHAR},
        PUSH_DATE = #{record.pushDate,jdbcType=TIMESTAMP},
        PUSH_TYPE = #{record.pushType,jdbcType=VARCHAR}
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByPrimaryKeySelective" parameterType="com.zfsoft.ha.dbaccess.data.DbHaWorkService">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_ha_work_service
        <set>
            <if test="workQueueId != null">
                WORK_QUEUE_ID = #{workQueueId,jdbcType=BIGINT},
            </if>
            <if test="serviceType != null">
                SERVICE_TYPE = #{serviceType,jdbcType=VARCHAR},
            </if>
            <if test="serviceMemo != null">
                SERVICE_MEMO = #{serviceMemo,jdbcType=VARCHAR},
            </if>
            <if test="sxServiceId != null">
                SX_SERVICE_ID = #{sxServiceId,jdbcType=VARCHAR},
            </if>
            <if test="qlCaseId != null">
                QL_CASE_ID = #{qlCaseId,jdbcType=VARCHAR},
            </if>
            <if test="caseNumber != null">
                CASE_NUMBER = #{caseNumber,jdbcType=VARCHAR},
            </if>
            <if test="pushMemo != null">
                PUSH_MEMO = #{pushMemo,jdbcType=VARCHAR},
            </if>
            <if test="serviceStatus != null">
                SERVICE_STATUS = #{serviceStatus,jdbcType=VARCHAR},
            </if>
            <if test="createBy != null">
                CREATE_BY = #{createBy,jdbcType=VARCHAR},
            </if>
            <if test="createDate != null">
                CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
            </if>
            <if test="updateBy != null">
                UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
            </if>
            <if test="updateDate != null">
                UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
            </if>
            <if test="operatorName != null">
                OPERATOR_NAME = #{operatorName,jdbcType=VARCHAR},
            </if>
            <if test="operatorCardNo != null">
                OPERATOR_CARD_NO = #{operatorCardNo,jdbcType=VARCHAR},
            </if>
            <if test="createBy != null">
                OPERATOR_PHONE = #{operatorPhone,jdbcType=VARCHAR},
            </if>
            <if test="pushDate != null">
                pushDate = #{pushDate,jdbcType=TIMESTAMP},
            </if>
            <if test="pushType != null">
                pushType =  #{pushType,jdbcType=VARCHAR},
            </if>
        </set>
        where ID = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.zfsoft.ha.dbaccess.data.DbHaWorkService">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_ha_work_service
        set WORK_QUEUE_ID = #{workQueueId,jdbcType=BIGINT},
        WORK_USER_ID = #{workUserId,jdbcType=BIGINT},
        SERVICE_TYPE = #{serviceType,jdbcType=VARCHAR},
        SERVICE_MEMO = #{serviceMemo,jdbcType=VARCHAR},
        SX_SERVICE_ID = #{sxServiceId,jdbcType=VARCHAR},
        QL_CASE_ID = #{qlCaseId,jdbcType=VARCHAR},
        CASE_NUMBER = #{caseNumber,jdbcType=VARCHAR},
        PUSH_MEMO = #{pushMemo,jdbcType=VARCHAR},
        CREATE_BY = #{createBy,jdbcType=VARCHAR},
        CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
        UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
        UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
        OPERATOR_NAME = #{operatorName,jdbcType=VARCHAR},
        OPERATOR_CARD_NO = #{operatorCardNo,jdbcType=VARCHAR},
        OPERATOR_PHONE = #{operatorPhone,jdbcType=VARCHAR},
        PUSH_DATE = #{pushDate,jdbcType=TIMESTAMP},
        PUSH_TYPE = #{pushType,jdbcType=VARCHAR}
        where ID = #{id,jdbcType=BIGINT}
    </update>


    <select id="queryHelpServiceHistoryList"    resultMap="BaseResultMap2">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        a.*,
        b.COMPANY_NAME as COMPANY_NAME,
        b.COMPANY_CODE as COMPANY_CODE,
        b.NAME,
        d.NAME as WORK_USER_NAME,
        c.SERVICE_NAME
        from t_ha_work_service a
        left join  t_ha_work_queue b
        on  a.WORK_QUEUE_ID = b.ID
        left join  t_ql_case c
        on  a.QL_CASE_ID = c.CASE_OID
        left join  (select ID,NAME  from t_ha_help_work_user)  d
        on  a.WORK_USER_ID = d.ID
        <where>
            <if test="workQueueIds != null">
                and a.WORK_QUEUE_ID in
                <foreach item="workQueueId" index="index" collection="workQueueIds" open="(" close=")" separator=",">
                    #{workQueueId}
                </foreach>
            </if>
            <if test="serviceStatus != null">
                and a.SERVICE_STATUS = #{serviceStatus}
            </if>
        </where>
        order by a.CREATE_DATE desc
    </select>

    <select id="queryHelpCompanyHistoryCaseList"    resultMap="BaseResultMap2">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        a.*,
        ca.APPLY_USER_TYPE,
        ca.APPLY_USER_NAME,
        b.NAME,
        d.NAME as WORK_USER_NAME,
        c.SERVICE_NAME
        from t_ha_work_service a
        left join  (select ID,COMPANY_NAME,COMPANY_CODE,NAME  from t_ha_work_queue) b
        on  a.WORK_QUEUE_ID = b.ID
        left join  t_ql_case c
        on  a.QL_CASE_ID = c.CASE_OID
        left join  t_ql_case_applay ca
        on  c.CASE_OID = ca.CASE_OID
        left join  (select ID,NAME  from t_ha_help_work_user)  d
        on  a.WORK_USER_ID = d.ID
        <where>
            <if test="credentialType != null and credentialType != '' ">
                and ca.CREDENTIAL_TYPE = #{credentialType}
                and ca.CREDENTIAL_NUMBER = #{credentialNumber}
            </if>
            <if test="applyUserName != null and applyUserName != '' ">
                and ca.APPLY_USER_NAME = #{applyUserName}
            </if>
            <if test="serviceStatus != null and serviceStatus != '' ">
                and a.SERVICE_STATUS = #{serviceStatus}
            </if>
        </where>
        order by a.CREATE_DATE desc
    </select>
</mapper>
